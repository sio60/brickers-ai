# docker-compose.yml (AI repo)
services:
  app:
    image: ${DOCKER_USERNAME}/brickers-ai:latest
    container_name: brickers-ai-container
    restart: unless-stopped
    ports:
      - "8000:8000"
    volumes:
      - ./.env:/app/.env
    environment:
      # ✅ 전체 작업 총 제한 (Spring보다 조금 짧게)
      - KIDS_TOTAL_TIMEOUT_SEC=840
      # ✅ Tripo 대기 제한 (무한대기 방지)
      - TRIPO_WAIT_TIMEOUT_SEC=780

      # ✅ S3 업로드 프리픽스 (선택)
      - S3_PREFIX=uploads/ai-generated
      # ✅ (선택) base url 직접 주고 싶으면 사용
      # - S3_PUBLIC_BASE_URL=https://YOUR_BUCKET.s3.YOUR_REGION.amazonaws.com
